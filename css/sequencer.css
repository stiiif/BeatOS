/* Sequencer Grid Styling */
.matrix-container {
    display: grid;
    /* 40px Label | 32 Steps | 25px Rand Pat | 125px Actions (expanded for Lock button) */
    grid-template-columns: 40px repeat(32, minmax(10px, 1fr)) 25px 125px;
    gap: 1px;
    padding-bottom: 20px;
}

.track-label {
    font-size: 0.6rem;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #171717;
    color: #666;
    cursor: pointer;
    border-radius: 1px;
    transition: all 0.2s;
}
.track-label:hover { background: #262626; color: #fff; }
.track-label.selected {
    background: #064e3b;
    color: #34d399;
    border-left: 2px solid #10b981;
}

.step-btn {
    height: 16px;
    background: #171717;
    border: 1px solid #222;
    border-radius: 1px;
    cursor: pointer;
    transition: background 0.1s;
}
.step-btn:hover { border-color: #444; }
.step-btn.active {
    background: var(--step-group-color, #10b981);
    border-color: var(--step-group-color, #10b981);
    box-shadow: 0 0 4px var(--step-group-color-glow, rgba(16, 185, 129, 0.4));
}

.step-btn.step-dimmed {
    opacity: 0.3;
    box-shadow: none !important;
}

/* Choke Group Colors */
.track-group-0 .track-label { border-right: 2px solid #3b82f6; }
.track-group-1 .track-label { border-right: 2px solid #8b5cf6; }
.track-group-2 .track-label { border-right: 2px solid #ec4899; }
.track-group-3 .track-label { border-right: 2px solid #ef4444; }
.track-group-4 .track-label { border-right: 2px solid #f97316; }
.track-group-5 .track-label { border-right: 2px solid #eab308; }
.track-group-6 .track-label { border-right: 2px solid #84cc16; }
.track-group-7 .track-label { border-right: 2px solid #14b8a6; }

.step-btn:nth-child(4n + 2) { margin-right: 1px; border-right: 1px solid #333; }

.step-playing {
    border-color: #fff !important;
    background-color: #444;
}
.step-btn.active.step-playing {
    background-color: #34d399;
    border-color: #fff;
}

.track-rnd-btn {
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #171717;
    color: #444;
    border-radius: 1px;
    cursor: pointer;
    font-size: 0.5rem;
    transition: all 0.2s;
}
.track-rnd-btn:hover { background: #262626; color: #10b981; }

.track-actions { height: 16px; display: flex; gap: 1px; background: #000; }
.action-btn {
    flex: 1; font-size: 0.45rem; display: flex; align-items: center; justify-content: center;
    background: #1a1a1a; color: #555; cursor: pointer; border: none; padding: 0; transition: all 0.1s;
}
.action-btn:hover { color: #fff; background: #333; }
.action-btn.mute-active { color: #ef4444; background: #450a0a; }
.action-btn.solo-active { color: #eab308; background: #422006; }
.action-btn.lock-active { color: #06b6d4; background: #164e63; }
.action-btn.erase:hover { color: #ef4444; }

.row-muted .step-btn { opacity: 0.3; }
.row-muted .track-label { opacity: 0.5; }
